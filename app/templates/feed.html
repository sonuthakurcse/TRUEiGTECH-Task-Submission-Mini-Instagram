{% extends "base.html" %}
{% block title %}Feed{% endblock %}

{% block content %}
<h2 style="margin-bottom:20px;">Feed</h2>

{% if posts %}
    {% for post in posts %}
        <div class="card">
            <h4>{{ post.author.name }}</h4>

            <img src="{{ url_for('static', filename='uploads/' + post.image_url) }}">

            <p>{{ post.caption }}</p>

            <div class="actions">
                <a href="/post/like/{{ post.id }}">
                    ❤️ {{ post.liked_by|length }}
                </a>
            </div>

            {% for c in post.comments %}
                <p><b>{{ c.user.name }}:</b> {{ c.text }}</p>
            {% endfor %}

            <form method="POST" action="/post/comment/{{ post.id }}">
                <input type="text" name="comment" placeholder="Add a comment">
            </form>
        </div>
    {% endfor %}
{% else %}
    <p>No posts available</p>
{% endif %}
{% endblock %}
